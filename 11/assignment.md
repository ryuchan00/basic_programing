基礎プログラミングおよび演習レポート ＃11
学籍番号:1920031
氏名:山川竜太郎
ペア学籍番号・氏名(または「個人作業」):個人作業
提出日付:2020/1/19

[課題の再掲]
演習3 数え上げ法によって平方根を求めるCプログラムを作成しなさい。精度をあげた時にどれくらいまで実用になるか検討しなさい。

演習4 区間2分法によって平方根を求めるCプログラムを作成しなさい。必要と思われる精度にしたとき、繰り返し回数がいくつになるか検討しなさい。

[実施したこととその結果]
演習3

作成したプログラム

```
#include <stdio.h>

double square_root(double n) {
    double a, b, i, x;
    for (i = 0; i < n; i += 0.000001) {
        x = 1 + i;
        a = x * x;
        b = a - n;
        if (b >= 0) {
            return x;
        }
    }
    return 0;
}

int main(void) {
    double a, n;
    printf("n> ");
    scanf("%lf", &n);
    a = square_root(n);
    printf("square_root = %g\n", a);
    return 0;
}
```

square_rootは平方根を求めるメソッドである。

結果

```
$ ./enumeration
n> 4
square_root = 2
$ ./enumeration
n> 9
square_root = 3
$ ./enumeration
n> 3
square_root = 1.73205
```

演習4

作成したプログラム

```
#include <stdio.h>

double square_root(double n) {
    double a, b, c, i, y, count;
    a = 0;
    b = n;
    count = 1000;
    for (i = 0; i < count; i++) {
        c = (a + b) / 2;
        // f(x) = x^2 - N
        y = c * c - n;
        if (y < 0) {
            // 区間(c,b]
            a = c;
        } else {
            // 区間[a,c]
            b = c;
        }
    }
    return c;
}

int main(void) {
    double a, n;
    printf("n> ");
    scanf("%lf", &n);
    a = square_root(n);
    printf("square_root = %g\n", a);
    return 0;
}
```

```
$ ./binary_search
n> 4
square_root = 2
$ ./binary_search
n> 9
square_root = 3
$ ./binary_search
n> 3
square_root = 1.73205
```

square_rootは平方根を求めるメソッドである。

[考察]

演習3

繰り返し条件と精度にについて様々な試行錯誤を行なった。繰り返し条件はfor文のi < nを条件としているが、これが一番だと思った。if (b >= 0)の条件でreturnしているので、繰り返しを抜けているので、平方根の近似値を見つけたらそれ以上はfor文を繰り返さないようにした。精度は速さとトレードオフになるので、私がどの程度の平方根を求めたいかによる。for文のiのインクリメントをi += 0.0001程度にすると、4の平方根を求めると2.0001となり、誤差が発生した。今回テストとした値は、3,4,9の平方根を求めることだ。ちゃんと整数になるものと、3の平方根のように無限に続くものの2つをテストした。なのでこの範囲で処理時間が10秒以内に完了するぐらいの精度を要求した。iのインクリメントの数値を小さくして試したが、0.000001にすると4の平方根が2になるようになり、ある程度の速さになるので、この値とした。

演習4

求める平方根をあらかじめ決めて、演習3と同じ3,4,9の平方根をテストに使うことにした。区間2分法にて平方根を求める時に論点は、精度になると思われる。演習3と同様に速さと精度はトレードオフの関係にあった。count = 1(つまり、for文の繰り返しを1回)にした場合は、3の平方根が1.5になり、精度はかなり不正確であると言える。精度を限りなくあげたければ、繰り返し回数を1億回以上を指定したりするのが良いが、それだとプログラムの完了が遅くなってくる。3の平方根が1.7320...となるので、小数点第4位まで正しく求まればそれなりの精度と思い、10の乗算の繰り返し回数にしようと考えた。10^100の繰り返し回数が、速いし目的の精度となったので、そのように指定した。

[アンケート]
Q1. C言語でプログラムが書けるようになりましたか。
自分の手足のように書くのは難しいです。

Q2. CとRubyはどのように違うと感じていますか。
型宣言が忘れることが多いと感じています。

Q3. リフレクション(今回の課題で分かったこと)・感想・要望をどうぞ。
ポインタ操作を予習しましたが、難しいです。
